# Redhat红帽 RHCE8.0认证体系课程 - P68：68_Video_Day11_RH294_Ch05_循环任务控制 - 好好好二狗 - BV1M3411k77W

好的，我们接下来我们来看一下第五章啊。我之前讲的那个变量之后呢，我们现在讲一个任务控制，可能看到屏幕啊。可以啊。好，任务任务任务控制。比如说我们比如说一次我们就不可能有时候啊这个剧本啊不能说只完成。

一个单一的任务，就如说我同时创建20个用户。或者同时要装三个软件包嗯，是吧？我们整个实怎么实现，对不对？通常我们在之前我们在学到我们的shall，我们的sha脚本的时候。

是不是用for啊循环是不是可以实现了？但我们在在同样在anbook里面，我们可以。用我们的。循环来实现。我这里的话清一下屏。我直接在比如说我这里我可以在那个。

VIMplaybook里面playbook里面我们可以建一个look一点YMM。落拼一点样么里面。这是一个new范啊，剧本开始。那是叫做U。都比三好对呗？作品端口，然后他的那个。host我就写我吧。

是吧我在两台机器上，我要创建用户。任务呢。比如说这里。第一个第一个任务，我要创建，我这里不要创建20个，我创建10个就可以了。然后我们采用哪个模块呢？有所对吧？那我是。咩。是不是我们取这个I同值？

注意啊，就循环里面它是每一个都是一个元素，所以的话直接取iteon就可以了。这个不用另外定义，我们在我们待会在循环里面会会有，它是相当于相当于是每一个项目是一个iteom。这用户不需要另外设置密码。

对吧？大家可以跟我一起敲敲啊。然后接下来我这一个清单里面啊，我的清单里面。我的清单里面呢会看到我们的一个。循环啊循我们要循环的话，是不是我们要有。多个元素对吧？要多个元素的话，我们是用。lo对吧。

LOOP。然后里面是我们循环的引用的一些。元素列表也是我们的一个循环的一个。参数啊。像这里我要创建，我上次我记得。创造又是20，那我们又从三手开始。

记得这里每一个元素都有有前面都它是一个元素啊一个列表形式啊。ususUS130US131。对吧。这是一个其中一个任务。比如说我还要装三个软件包是吧？这全部大小。然后我们安装软件包是不是一样模块？

要模块的话。同样这里是它是它这个item呢，只是在它的任务里面生效。它不是全局范围的，如果全局范围你要定义在前面的，懂我意思吗？state我就装装最新版吧，它要更新到最新lateates。

然后这里的路这个路跟前面路是不冲突的啊。比如说我要装。38。Samba crying。还有比如说我的NFS有 steal。诶。这就是我们一个。完整的一个就是一个循环体的一个示例。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_1.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_2.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_3.png)

对吧嗯。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_5.png)

🤧嗯。然后如果我们是就这里的话，这个循环一个设力，但这里这个循环铁呢，它是就是说它的循环的部分呢，它循环的一个部分呢，它是在。任务里面这些定义了。但如果你要使用全局的话。

我们可以把我们循环底的变量啊变变我们可以通过变量形式来定义我们的。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_7.png)

循环体的内容。然后呢，我们可以类似这样啊，看到左边例子么样。我再写个路er2。我们可以改用。然后这里用vas，对不对？用变量VARS啊。嗯。然后这里。我定一个数组，对不对？如果这第一个数组叫优斯那亚。

那我这里是us色40。有色43。我这里写1个好了。数组对不对？这个它这个数组啊。怎ご。你Y歪吗。🎼你就直接在这里YY，然后10个P9个P，然后再再改嘛。忘了BM了。月还记得吗？要个快捷键。あは？

🎼比如说我复制10，我要复制10个，那就1YY。然后这里的话我在下行P一下。P吗？P呀P直接P就行，按P就行了。大批是上面贴小批是上下面贴吧。比如说我输叔是玩吃个是不十歪歪。哎，这里又又走在最前了。

我把那个什上器点关掉。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_9.png)

呃，马娟娟有问到问题，九月体考试的话，考试练习环境我在明我在可能在下一天我如果有时间我讲，然后呢。真题的解析，我们有考前辅导的啊，9月16号13号会讲的。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_11.png)

这个不是现在的东西啊，不像在那种，所以的话就不就现在我这不涉及了。好，我定完变量之后呢，我这这里的话。所以我想想就他给。比如说我的要装这三个包，然后我接下任务是吧？这里的任务第一个我要创建10个用户。

模块name是吧？我这个只要直接直接引用item。Stay， present。然后呢，我们这里采用录，我们的循环。但是这里的话，我们的循环的所有的元素呢。他其实是读这里的啊。

我们可以读我们的定义的usC下划线 name。对吧。然后呢，我这里的录item是读这里的。那这里的变量呢。它这里的一个标签呢全读上面的对应的我们变量定义的内容，懂我意思吧？好。

接下来我们第个任务是不是装三个包啊？

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_13.png)

那习环境啊。那习做一下我的名啊，这个我看一下。可以吧，练习环境我等会讲一讲啊，等会讲一讲练习环境。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_15.png)

然后呢，这里还是使用我们的。你们的药模块。那得他的谎法。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_17.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_18.png)

诶。点错了啊，我的我要点回来。然后这里同样循环name还是item，对不对？state。我用pre就可以了。然后呢，这里的路。它自里的循环所调用的元素呢。Package。对对吧。可以吧。note2。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_20.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_21.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_22.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_23.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_24.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_25.png)

对吧我们的剧本就这么写啊，变量定义的剧本把变量定义先放在前面。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_27.png)

播放前面。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_29.png)

这是我们的。栗子一哈。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_31.png)

就创建我们用那个，如果说平平同时要创建这么多，对吧？然后接下来我们有一个。两个用户里面用字点的方式，我们怎么循环呢？



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_33.png)

来写一下我们两种啊。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_35.png)

两种方式创建两个用户，我们有传统写法跟变量定义。你们这样写吧，play books里面的ro3A。点压哦。这也是一个相当于一个。comppressse loop我们也多重循环。

就里面循环元素也可以多重对吧？复合循环。任务。我们这里呢是不是没有那个。我们这里传统写法是这样子啊。优er模块，然后我是要定义的。N。我用item点亮可以吗？就它里面循环元素里面的一个。

🎼我待会会在下面定义啊，用ite点那。不是我其实我把lo写在前面也可以啊，但它的循环循环的那个结构只是在只是在我们的任务里面。这里用iteom。Diansxiao。但是有类型。State。They不。

然后接下来我们循环体里面。录。那标签里面怎么打定义标签呢？那样它是一个分它里面是一个一组一个标签啊，这里us色。50是吧。它的税有类型，因为它是属于。同个子同就一个指向的分里面的分内容。

所以的话这里我我为什么就我的shall就不加了，对吧？我shall这里就不加一个列表项了，因为列表一个横杠了，懂我意思吗？然后呢，这里第二个分项us色51。Sll。S speak no lock  a。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_37.png)

啊，我们刚才这几个剧本还没试一下怎么能不能执行的哈，我们试一下。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_39.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_40.png)

这是传统鞋法啊，叫look3A。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_42.png)

我刚才把刚才我们这几个。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_44.png)

剧本啊来来跑一遍。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_46.png)

先检查一遍啊。看有没有问题，没有啊，我先把刚才这写的几个基本排面，看看有没有问题。反正写完之后，我们还还是得验证一下的嘛。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_48.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_49.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_50.png)

对吧刚才我们user30是不是用户都在创建了？

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_52.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_53.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_54.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_55.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_56.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_57.png)

可以随时给大家看我们执行结果。对吧。最近结果就大概这样。然后刚才路路2。其实就我们就怕写的有问题，所以每次再检查看一遍。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_59.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_60.png)

其实加杠V有一个好处啊，就是我这里我才以知道我是用哪个配置文件，有时候真的不就不会出错。懂我意思吧。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_62.png)

他这有会提示你的配置文件的。不行啊，为什么不行呢？你对文明不支持这样的啊。所以我们变上定义的话，记得我们user name我们要加一。我们循环的时候啊。看一下怎么搞好而已，我想想。就针对我们的拍lo2。

我想想大家可以帮我想想啊。这两天啊吧这两天我们会把会把那个综文练习题给给大家，但不一定是最后会考试题目。因为考试题目真的不知道嘛，懂吗？只能说凭我们经验去看一下，就综合练习有没有类似的可以帮到大家的。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_64.png)

先看一下这个脚本，如果怎么我怎么引用。我这样look口的话，发现问题。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_66.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_67.png)

他现在是那个不能一一一变量一起这么来的。刚才这种做法我们是可以的对吧？在任务里面，那这种呢。我看写法是不是有什么问题？我来看一下啊。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_69.png)

就这种写法我觉得也不太严谨啊。如果不出错的话，其实我觉得在喜欢哪类定义，我就觉得更好一点。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_71.png)

就出现我们以前的问题了。像想讲大这个我留给大家思考一下，如果采用变量定义。如何才会使执行结果正确？

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_73.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_74.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_75.png)

然后在我们的路3A，我们看一下这个问题我我就给大家思考一下啊，就刚才我这个执行是出问题的那如何去修正这个剧本，我才能。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_77.png)

达到一个正确的跟我们刚才录B一的一样的结果。大可思考一下，就刚才的这个路瓣，我这么写的。但是有问题。相当于我的里面创建10个用户，我要通过itam去循环，那怎么办？뭐 벌 뭐。可以想一想。

我们文语我们学过知识吧。之前我们是一个一个调用的。但刚才我们在look一的时候。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_79.png)

是不是可以啊？那我怎么这不行呢？可以帮我想一想吗？

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_81.png)

然后路3A的话，我们看先看一下。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_83.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_84.png)

连度3A也是可以的。我就送你两个用户。如3A是可以的。然后现在给当家时间想想路2的问题。然后待我再讲好吧。就这个问题我怎么办？好，刚才这个问题有了答案了啊，有了答案的。我看了一下董华池的。

我这我我我我反正这个的话，他说的是没错的啊。我们在循环列表的时候，必须要把我们把那个元素呢不能按照分项来写。这样才是正确的。懂我意思吧？这个注意啊。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_86.png)

那我们刚才采用变量定义呢，会怎么讲呢？我看一下。有有我那个5353。比如说这里user。inform还是指定userin four，然后这里。用用那个字典来写。就定义变量的话，可以这么写。任务啊。

有什模块？然后这里的话那样。这里的话怎么调用呢？它这值可变的是吧？item点vol点nap。在这个item这里的话，它是有一个数字典是吧？然后我们这带带我们进行一个转换啊，就把它的。

把它我们后面有一个参数就d to items啊，就把我们的字典里面的转化成元素，它有个转换器的。虽然这里我们在书上可能没怎么讲。点sell，然后呢。State。北站成到镇路。在通过。有 sir。

in four，然后。Dick to items。我看能不能执行。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_88.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_89.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_90.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_91.png)

这地图items它是一个变一个一个将字典元素转换变来的一个变样转换器。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_93.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_94.png)

然后呢，我这边我试一下能不能执行啊。看一下。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_96.png)

没问题啊。它是取值里面的某个部分，就标我标签里面只有某个部分啊。如果是我们喜欢喜欢的话，我们想用字典话，记己都要把它转换成一个。转把字典转换成对应的一个标签啊。有什么问题吗？这里看看。如果没问题。

请打一哈。最d two items相当于把一个字典转化成。变量标签以便我们去引用。所以这里为什么上面用item杠item点valuevol啊。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_98.png)

这里为什么item点vol啊，懂我意思吧？item点vole点下面的值，因为它这个值会变的嘛。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_100.png)

没声音了吗？有吧。Hello， youre using。喂，有声音了。这块有问题吗？有问题可以提问，没问题的话扣个一。它相当于广播把item这里是user无端，然后到volume里面对吧？它取了一个值。

你们看到一个结果吧，那chech的结果，它那这样就好理解了，对不对？他的执行结果里面这样出来就好理解了，懂我意思吧？所以有时候你这个不理解到你用杠B就看看就知道了。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_102.png)

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_103.png)

然后还有一些视力条件啊，视力条件的话就是我们的一些。比较。懂吧？也比较，然后还有就是那些那个变量存在不存在等等一些比较符。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_105.png)

这个可以我们后面啊。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_107.png)

我们后面可以慢慢看一下，然后上午呢我就不再多讲了，先把把这个循环先消化一下，好吧，下上午就不再多讲了，现在给先给大家练几练到几个实例，我先把。



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_109.png)

我先把那个。

![](img/52c5ef9a0d8d2507a571eddee4ec59c6_111.png)

我先把今天的部分笔记，我先把那个最最后先共享出来吧，可以吗？跟郭网出来，然后给大家先做一个。回就做先做一下上午的一个回顾跟预习，跟下午的预习。然后呢，我们下午两点钟继续讲。大先练习几个实例哈。

然后我答应过大家的就是这看这这看接下来这两这几天我把那个。部分练习题我整理出来。行，那我先结束共享，然后呢给给段时间练吧，可以吗？



![](img/52c5ef9a0d8d2507a571eddee4ec59c6_113.png)