# 华为云PaaS微服务治理技术 - P115：07.学成在线项目部署-portalview-测试通过 - 开源之家 - BV1wm4y1M7m5

好，那么下边呢我们来测试一下这个port view的微服务。大家可以看到现在的话，它是不是显示运行中啊，也就是正在运行是吧？哎，呃，那这里边呢我们可以看一下啊，他的这个日志啊，它的日志嗯。

那在这里边呢我们来看一下它的日志吧。啊，刷新刷新一下啊，因为这个日志他要上报啊，有时候他上上报的不不是很及时啊。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_1.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_2.png)

嗯。我们查一下上下文啊，看一下这里面有没有错误。其实啊还有一个非常哎，你看这儿是不是已经有错了，对吧？有错了。😊，说这个是什么呀？其实有一个非常直接的这个什么，这是呃非常直接的这个测试的方法。哎。

什么测试方法呀？因为大家知道啊，我们说这个微服务它在起来之后，如果启动成功，我们知道他是不是会把自己。😊，注册到这个云平台的服务注册中心呀。



![](img/fd091366604137a2ea5bb5ca59ed40f7_4.png)

对啊，所以现在我们可以完全可以这么做呀。我们就来找到这个呃服务注册中心。嗯，然后找到他的那服务注册中心在哪呀，还有印象吗？



![](img/fd091366604137a2ea5bb5ca59ed40f7_6.png)

是不是在这个微服务引擎CSE这里头啊，然后你来找啊哎找，就是里边是不是有一个叫服务管理服务目录。嗯，然后我们这个我们这个应用是不是就是走的这个cloud01啊，哎嗯大家可以看到你看。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_8.png)

那明显的不行嘛，对吧？😊，啊，有人有人说这个名字好像都迷了，是不是说这个集群是什么？集群我创建的名字是不是叫XCEDU杠02吧。😡，集群的名字有印象吗？我们把这几个名称给他捋一下啊，你别再别再晕了啊。

你看这个集群。😊。

![](img/fd091366604137a2ea5bb5ca59ed40f7_10.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_11.png)

干下啊？集群是不是有SXCEDU02啊，这是我的集群，对吧？哎，还有刚才我说的那个呃所属的应用，就是那个服务目录应用在哪呀？就在这儿。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_13.png)

他一旦启动成功，是不是向微服务的这个注册中心，云平台的注册中心把这个这个这个微服务注册成功呀。对你就找到这个微服务的哎，这个目录哎，微服务的目录，然后找到这个名这个名是不是和我们看到的这个哎。

这个应用名一样呀。对，对应。那你就看这里头的东西。😊。

![](img/fd091366604137a2ea5bb5ca59ed40f7_15.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_16.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_17.png)

啥啥东西啊，他他有没有portview有，但是他有实力吗？没有嘛，对。😡。

![](img/fd091366604137a2ea5bb5ca59ed40f7_19.png)

你把它删掉。😡。

![](img/fd091366604137a2ea5bb5ca59ed40f7_21.png)

删了好，看好啊，删了吧，哎，你都把它删掉。😡。

![](img/fd091366604137a2ea5bb5ca59ed40f7_23.png)

为啥？因为我们原来是不是通过本地的测试，然后呢，把本地的这个服务一起向这个云平台的注册中心报了吧，注册了是吧？那现在你是不是要全要上云呀？全要上云的话，这个这个服务在云上启动成功。

它是不是也会向这个云平台的注册中心去这个注册它的服务啊？哎，所以我把它全删掉啊，删掉。然后呢，我们再来看啊回过来。😡。



![](img/fd091366604137a2ea5bb5ca59ed40f7_25.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_26.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_27.png)

你删掉完了之后，我们找到刚才我们创建的那个工作负载点开。然后在实例列表当中，你知道我要干啥呀？删除。为啥子？删除是不是就意味着重启了？对我们再让它重启一下啊，再让它重启一下，然后我们再查日志。😡。

然后你在你你一会儿呢也观察这个服务目录，他有没有嗯。好，这个过程就是一个调试的过程啊。哎，所以不要着急，慢慢来。因为第一次我们把这个微服务呢把它上云嘛。哎，好，然后我们再。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_29.png)

刷新一下啊，哎，你看都出来了吧，出来了之后呢，大家怎么弄啊，点开。😊，点开这个运运运维的这个这个页面。哎，然后呢，你就看这个日志。😊，呃，是正确的还是错误的嘛？这里面是不是有一个刷新呀，刷。😊，再刷。

啊，他这个上报呢有点不太及时嗯。

![](img/fd091366604137a2ea5bb5ca59ed40f7_31.png)

直接在这耍。哎，你看好像大家看到这个关键字是不是特别高兴啊，finish是吧？这说明这个服务是不是就启动成功了呀。那你看这个目录里头有没有啊，看看有了吧。😊，看见了吗？对。那有说老师刚才咋没有啊，对。

刚才没有，可能是什么呀？它启动过程当中，或者说原来原来这里边是不是有目录啊，我也不知道什么时候上报的，可能都是接口是不是有冲突或者什么，你把它全清完，你把这个服务目录边，这个微服务全删掉。然后呢再起嗯。

就这么做。好，那现在我们发现这个服务已经成功启动了。那我现在就想来测试了。那咋测试呀？😊，就是我们原来是不是创建了他这个工作负载，我们说允许他外网访问呢，你看访问方式是不是外网访问呢？对你点开。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_33.png)

啊，有人说报错了，这是这是不是不对呀？😡，当然不是啊，这个微服务我们知道你是不是要访问里边的服务接口了呀？你找到这个服务接口啊。对，找到服务接口。对，这这这是我本地的代码，不要管它啊。

这里面可能引用有这个这个依赖有些问题，不要管它，你就你就找接口就行了。来，你现在运行的可不是本地的是云上的这个服务，你找来吧。😡。



![](img/fd091366604137a2ea5bb5ca59ed40f7_35.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_36.png)

哎，然后杠ge我我记得有一个接口是不是get什么呀？就是get课程信息，是不是啊？你看往下翻是不是他来吧，我们找一个课程信息，看有没有。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_38.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_39.png)

哎，这个课程这个这个get这个是读这个呃，这个这是不是这个公网的这个MgodB啊，读这个view下划线course啊，你找到找到一个课程啊，我们把它输进去，嗯，来看一下看好。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_41.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_42.png)

你看。这是不是就不对了，看见了吗？这就不对了。你按照你的这个理解，你没发现吗？他也不行，那这个怎么办呢？对我们得思考一下。😡，那出现这个问题的话，我们那得需要思考一下，看是呃什么原因导致的。

但是我们最直接的方式大家注意啊，我们先可以先看一下呃，我们的接口正确不正确，什么意思呀？就是我现在输入的这些，我的确是按照我们代码当中，哎，要求的这个接口的地址来输入的这个接口路径，对吧？那现在的话。

我们发现这个接口并找找不到啊，对不对？那怎么办？那我们看一下，注意你再进到我们说的这个服务的目录当中。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_44.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_45.png)

![](img/fd091366604137a2ea5bb5ca59ed40f7_46.png)

你要查他的接口契约。查他的接口契约。有说老师这个接口契约原来不都正确吗？现在它怎么会变呢？你可别忘了，我们是把这个代码把它传到本地服务器。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_48.png)

去构建的对吧？这和你通过这个ide又不一样了，对不对？所以你再回过来看一下啊，注意看。所以这里头各位你点开在这儿是不是有一个服务契约呀？点。😡。



![](img/fd091366604137a2ea5bb5ca59ed40f7_50.png)

各位我们来看啊，注意看了，这里边是不是有一个叫贝斯 pass，看见了吗？😊，对这没问题吧。哎，那你再往后边看，它里面是不是有一个pass。😡，对，诶，好像重复了，你看见了吗？对你看这儿。😡。



![](img/fd091366604137a2ea5bb5ca59ed40f7_52.png)

这是不是就好像重复了。哎，那你找找我们那个get那个接口，你看一下，你看看看看看啊。😡。

![](img/fd091366604137a2ea5bb5ca59ed40f7_54.png)

看这。看看看。对不对？有问题了，就说明什么，说明我们这个base pass和我们具体的这个接口的URL这一部分。😡。



![](img/fd091366604137a2ea5bb5ca59ed40f7_56.png)

是不是重误了？懂我意思吧？对，就出现问题了。😡。

![](img/fd091366604137a2ea5bb5ca59ed40f7_58.png)

你说老师，那你这个接口找到了，那咋办呢？其实那我就知道了，其实字里边应该怎么做呀，看好啊。😡，你就应该这么来做看好。



![](img/fd091366604137a2ea5bb5ca59ed40f7_60.png)

看一下出来了没有？对不对？因为你是完全通过这个接口契约这个接口的地址哎，来输入。😡，从这个测试上来说，我们至少得知道哎，这个port view连接mongoDB是没问题的。这个数据是不是已经取出来了。

但是这个接口却有问题。😡，因为这个接口各位这个接口。你没发现这个重复了吗？那怎么处理啊？😡，嗯，好，那也就是说这里头我们在调试的时候呢，其实我们遇到了一个问题，哎，遇到了一个什么问题啊？

就是这个接口哎和我们早期写的这个接口不一样。哎，但是其实这个mango这个port view这个服务呢，应该说已经部署成功了？哎，它已经部署成功了？那这个部署成功之后，为什么说它部署成功了呢？

因为它连接mongodB是不是已经成功了？并且我按照它接口契约要求的这个接口地址是不是也能正确访问。😊。



![](img/fd091366604137a2ea5bb5ca59ed40f7_62.png)

对，所以到这儿我们应该说这个mon呃这个portto view的这个测试，我们应该就算通过了哎，就算通过了。那只是说现在这个接口有问题，稍后我会修改这个接口。好。😡。

