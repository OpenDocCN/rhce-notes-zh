# 2021全新 RHCE8.0 红帽认证入门教程——可零基础入门学习【网络安全／Linux】 - P59：Day10_Ch04b_Ansible Vault - IT老表哥 - BV1444y1h7Bx

![](img/7314385d90542d30a025304d1d1bf94f_0.png)

![](img/7314385d90542d30a025304d1d1bf94f_1.png)

好了，我们来讲answerable what。SO box我们作用的类型啊。SObo我们看一下啊，我们作用是加密敏感数据、密码等信息。通常情况下我们定义在变量里面。这用情景就是加密变量文件或者是证书啊。

但证书这里不太讲，我们主要讲那个。

![](img/7314385d90542d30a025304d1d1bf94f_3.png)

我们看一下SOva的一个说明。

![](img/7314385d90542d30a025304d1d1bf94f_5.png)

![](img/7314385d90542d30a025304d1d1bf94f_6.png)

![](img/7314385d90542d30a025304d1d1bf94f_7.png)

![](img/7314385d90542d30a025304d1d1bf94f_8.png)

好的。我来看看啊。是不是列出很多的用法，通常不会。对吧不会就help对吧？不会就help。然后呢。男人很管用，man menu对不对？有问题找男人，对不对？或者是试男人就man一下，我们也可以这么讲。

懂我意思吧？那主要我们看一下。

![](img/7314385d90542d30a025304d1d1bf94f_10.png)

S box的用法。

![](img/7314385d90542d30a025304d1d1bf94f_12.png)

它简化版的usage啊，看到没有？它下面的一些参数。啊。创建解密。编辑。查看可能我们2。82。9不太一样啊，其实差不多的，只是选项掉了一下而已。还有我们的。inqui加密就是已存在文件加密。

哦因为屏幕关了。然后呢。还有加密字符串重建。对不对？这几个那我们讲一下。讲一下其中一些东西啊。哎，这里的话好像我这个图又丢掉了。没事啊，我把它涂补一下。



![](img/7314385d90542d30a025304d1d1bf94f_14.png)

![](img/7314385d90542d30a025304d1d1bf94f_15.png)

我现在一边一边上课，我一边解答人家气的问题啊哎。

![](img/7314385d90542d30a025304d1d1bf94f_17.png)

对吧这种服务的真难呢，好吧。我们来看一看。as of god我们要create second ya么。



![](img/7314385d90542d30a025304d1d1bf94f_19.png)

我就创建1个SEC。

![](img/7314385d90542d30a025304d1d1bf94f_21.png)

点完有没有？那我此时要输入我们的加密密码，然后再确认一遍。

![](img/7314385d90542d30a025304d1d1bf94f_23.png)

对吧。

![](img/7314385d90542d30a025304d1d1bf94f_25.png)

再确认一遍，我这里我补个截图啊，因为这个截图掉了。

![](img/7314385d90542d30a025304d1d1bf94f_27.png)

然后回车它会调用我们的1个VIM的编辑器。

![](img/7314385d90542d30a025304d1d1bf94f_29.png)

对吧。我们自己定一个变量，好吧。同样是优色的。Testax user。右所20，角志文字202。好，宝和它是临时调用我们的VM编程器，然后输入下面的那容，O思吧？



![](img/7314385d90542d30a025304d1d1bf94f_31.png)

好。

![](img/7314385d90542d30a025304d1d1bf94f_33.png)

然后我们来我们现在我加密过那种，看一下是不是一对加密过的用S保1。1。是吧。加密的内容你看不了的。那我们怎么看呢？用answible。what down what啊will。赛克电样某。

sck联盟对不对？然后输入我们的密码。出来了。懂我意思吗？然后呢，我们输我们。🎼要写加密文件，写这个加密过了SOvo之后呢，这个我们在练习再包括我们的节后考试会考的啊，然后呢。如何调用？我剧本我写一个。

🎼文名文件名叫tva。电压吗。对吧。写个剧本啊。Create。Users via what。Host。サーバス。对吧。然后呢，我调用我通过引用的外部文件可以吗？Vs fast。homet里面。

asible目录里面的一个sck点M刚才我们创建的一个加密文件。然后我们的任务是什么呢？ね。create users，对不对？然后同样的，我们就类似我们的刚才创建用户的一个剧版。我就创建我就不用其他了。

我就简简单单写一个。username就可以了，对不对？State。不在，其实你这个写的七8九十字，应该你自己都会写了，对不对？就不用看了，自己都会写了。保存退出。那好。



![](img/7314385d90542d30a025304d1d1bf94f_35.png)

我现在调用他的文件，我来看一看能不能执行。Errver。attempting to dec but no secret no no secret out，我找不到这个vot的那个密码。对吧。

我来看一看啊。那怎么办呢？有两种方法，一种。是叫ask for pass这种吧这种有这种这种方法。呃，asible playbook我们调用啊，这种是老版本里面使用的一个方法，叫做ask vote。怕。

但现在暂时保留啊。tsvat点M，然后他会问你这个wt密码。你看剧本执行了。对吧这是一种。但是我们建议用第二种方法，第二种版本方法是我们现在一直在用的。这种方法呢在2。5以前的版本是可以的。

但现它我我我不确保说假如我们的S5出了3。0以后，那这个方法会不会被去掉？我们用的方法叫做vot IDD。然后 at调出。输入过密码的一个提示符，懂吗？对吧volte passport一样的。哦。

如果是出错，会这样的啊。因为刚才我们已经发生了变更改，所以的话就他这里的话就是1个OK啊，不是chanch的，懂吧。方法3。我直接写一个文件放在我们的一个就直接写一个放置我们用名密密码的一个文件。

比如说我就写一个pass点妖么。我就写一个字符上叫readdhead，对吧？

![](img/7314385d90542d30a025304d1d1bf94f_37.png)

然后呢。Ser我杠play book，我直接调用我们密码的文件。但是纯文本的啊，必须要存文本的。what password file等于pas等 ya某，我是用相对路径nplay book。

然后这样就我就不用输入密码了。但是这个文件呢你建议加一些密啊，比如说我隐藏掉或者怎么样，对吧？这种也可以。三种方法都提供给大家。如果明白的话，请打O。然后接下来我们讲其他用法。三种用三种方法都可以。

但这个文件你要加强安全措施。我以隐藏隐藏啊或其他的对吧？你这个你是相当于你把密码铭文写在里面了。今今点二。这个应该是可以的。比如说你隐藏嘛，你前面加个点嘛，最简单的。有问题可以提问啊。

然后接下来我们讲一下提道用法，解密。好，我们看一下。我们来看一下啊，解密。哎，我刚才帮就是说这个问题还是很多了。我们看一下如何解密describe。Describe。我把刚才加密文件解密掉。Sck。

电压宝。好，输入我们刚才的密码是吧，dequest successfulces。那我们cat。数字出来了。对吧然后我可以把它重新加密反义词enscribe。对吧我重新加密了。懂吗？



![](img/7314385d90542d30a025304d1d1bf94f_39.png)

![](img/7314385d90542d30a025304d1d1bf94f_40.png)

![](img/7314385d90542d30a025304d1d1bf94f_41.png)

接下来我们可以rekey，我们把密码更改掉，可以吗？

![](img/7314385d90542d30a025304d1d1bf94f_43.png)

![](img/7314385d90542d30a025304d1d1bf94f_44.png)

![](img/7314385d90542d30a025304d1d1bf94f_45.png)

![](img/7314385d90542d30a025304d1d1bf94f_46.png)

![](img/7314385d90542d30a025304d1d1bf94f_47.png)

![](img/7314385d90542d30a025304d1d1bf94f_48.png)

![](img/7314385d90542d30a025304d1d1bf94f_49.png)

![](img/7314385d90542d30a025304d1d1bf94f_50.png)

![](img/7314385d90542d30a025304d1d1bf94f_51.png)

![](img/7314385d90542d30a025304d1d1bf94f_52.png)

你们看一下reki的话，比如说我改成。

![](img/7314385d90542d30a025304d1d1bf94f_54.png)

啊。

![](img/7314385d90542d30a025304d1d1bf94f_56.png)

Rhead Bali。Where have。巴黎。

![](img/7314385d90542d30a025304d1d1bf94f_58.png)

哦，不对，他这里的话他是要先输入当前的密码。然我再输入新的密码。

![](img/7314385d90542d30a025304d1d1bf94f_60.png)

再次确认。🎼可以了，对吧？你把密码改了，然后我要编辑已存的加密文件怎么办呢？sible what adding不能用直接用VI嘛，你用VIM试一下。



![](img/7314385d90542d30a025304d1d1bf94f_62.png)

![](img/7314385d90542d30a025304d1d1bf94f_63.png)

你怎么编辑嘛？

![](img/7314385d90542d30a025304d1d1bf94f_65.png)

![](img/7314385d90542d30a025304d1d1bf94f_66.png)

Added。saturday一号。

![](img/7314385d90542d30a025304d1d1bf94f_68.png)

そ味は。我们刚才更更新过了。对吧比如说我改成21。🎼保存退出。

![](img/7314385d90542d30a025304d1d1bf94f_70.png)

就O可以了。通常呢我们通过使我们使用加密文件来保持变量密码的敏感数据呢，最好也是最简单的，就是用隐藏文件。比如说我们的那个。是吧赛克点M。就前面加个点吧。



![](img/7314385d90542d30a025304d1d1bf94f_72.png)

![](img/7314385d90542d30a025304d1d1bf94f_73.png)

我们改一下，前面这个点不就隐经藏文件了吗？然后剧本里面我们再改一下。

![](img/7314385d90542d30a025304d1d1bf94f_75.png)

![](img/7314385d90542d30a025304d1d1bf94f_76.png)

这里。这个点虽然看起来也不太安全啊。

![](img/7314385d90542d30a025304d1d1bf94f_78.png)

懂我意思啊？如果这里懂的话，请打个P。

![](img/7314385d90542d30a025304d1d1bf94f_80.png)

![](img/7314385d90542d30a025304d1d1bf94f_81.png)

![](img/7314385d90542d30a025304d1d1bf94f_82.png)

好，我们这一块讲到这儿啊，SO boys我们讲完了，那休息1010到10分钟，我们待会儿讲最后一节。

![](img/7314385d90542d30a025304d1d1bf94f_84.png)

![](img/7314385d90542d30a025304d1d1bf94f_85.png)

管理事实，也就是我们sible主机传回的信息。

![](img/7314385d90542d30a025304d1d1bf94f_87.png)

![](img/7314385d90542d30a025304d1d1bf94f_88.png)